import{a as w,b as A,c as U,d as F}from"./chunk-YS4ROTMG.js";import{A as D,B as g,Ga as H,Ha as u,Ka as P,Na as R,P as a,Ra as v,V as M,W as d,_ as x,a as y,b as h,ca as N,da as L,ha as f,ia as l,ja as o,ka as O,ma as _,na as k,sa as c,ta as j,ua as E,x as I,y as p}from"./chunk-WPDNPK4T.js";var b=class t{constructor(n){this.http=n}apiUrl=F.apiUrl;baseUrl=`${this.apiUrl}/api/transferencias`;create(n,e,i){let m={origem:n,destino:e,valor:i};return this.http.post(this.baseUrl,m)}listByConta(n){return this.http.get(`${this.baseUrl}/${n}`)}static \u0275fac=function(e){return new(e||t)(D(P))};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})};function $(t,n){t&1&&c(0," Carregando... ")}function B(t,n){t&1&&(l(0,"mat-icon"),c(1,"autorenew"),o())}function V(t,n){if(t&1&&(l(0,"div",5),c(1),o()),t&2){let e=k();a(),j(e.error)}}var s=class t{service=g(b);route=g(R);columns=[];data=[];loading=!1;error=null;contaId=null;ngOnInit(){let n=this.route.snapshot.paramMap.get("id"),e=n?Number(n):NaN;isNaN(e)?this.error="ID inv\xE1lido na rota.":(this.contaId=e,this.load(e))}load(n){this.loading=!0,this.error=null,this.service.listByConta(n).subscribe({next:e=>{console.log(e);let i=(e??[]).filter(r=>r.contaOrigem.id===n).map(r=>h(y({},r),{contaOrigemId:r.contaOrigem?.id??null,contaDestinoId:r.contaDestino?.id??null,contaParceiraId:r.contaDestino?.id,contaParceiraLabel:r.tipo==="ENTRADA"?"Conta Origem":"Conta Destino"})),m=i[0]?.tipo;this.columns=[{key:"id",label:"ID"},{key:"contaParceiraId",label:m==="ENTRADA"?"Conta Origem":"Conta Destino"},{key:"valor",label:"Valor"},{key:"dataHora",label:"Data/Hora"},{key:"tipo",label:"Tipo"}],this.data=i,this.loading=!1},error:e=>{console.error(e),this.error="Falha ao carregar transfer\xEAncias.",this.loading=!1}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=M({type:t,selectors:[["app-transferencias-list"]],decls:8,vars:6,consts:[[1,"container","py-4"],[1,"mb-3"],[1,"btn","btn-sm","btn-outline-primary","mb-3",3,"click","disabled"],["class","alert alert-danger",4,"ngIf"],[3,"columns","data"],[1,"alert","alert-danger"]],template:function(e,i){e&1&&(l(0,"section",0)(1,"h2",1),c(2),o(),l(3,"button",2),_("click",function(){return i.load(i.contaId)}),N(4,$,1,0)(5,B,2,0,"mat-icon"),o(),x(6,V,2,1,"div",3),O(7,"app-list",4),o()),e&2&&(a(2),E("Transfer\xEAncias da Conta ",i.contaId),a(),f("disabled",i.loading),a(),L(i.loading?4:5),a(2),f("ngIf",i.error),a(),f("columns",i.columns)("data",i.data))},dependencies:[u,H,U,A,w],styles:[".container[_ngcontent-%COMP%]{max-width:960px}"]})};var q=[{path:"list/:id",component:s}],C=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=d({type:t});static \u0275inj=p({imports:[v.forChild(q),v]})};var S=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=d({type:t});static \u0275inj=p({imports:[u,C,s]})};export{S as TransferenciasModule};
